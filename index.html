<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Title</title>
</head>
<body>
<h1>测试重力</h1>
<button onclick="requestPermission()">请求重力感应权限</button>
<p id="orientationOutput">等待设备方向信息...</p>
<script>
  function requestPermission() {
    if (typeof DeviceOrientationEvent !== 'undefined' &&
            typeof DeviceOrientationEvent.requestPermission === 'function') {

      DeviceOrientationEvent.requestPermission()
              .then(permissionState => {
                if (permissionState === 'granted') {
                  alert('方向传感器授权成功！');
                } else {
                  document.getElementById('orientationOutput').innerHTML = "授权被拒绝！";
                }
              })
              .catch((err) => {
                console.error("请求权限失败:", err);
              });
    } else {
      console.log('当前设备或浏览器不支持方向传感器 API');
    }
  }

  if (window.DeviceOrientationEvent) {
    window.addEventListener('deviceorientation', function(event) {
      var alpha = event.alpha; // 设备在指南针中的方向，以度为单位，从0到360度。0度指向地理北极。
      var beta = event.beta; // 设备在水平面上的倾斜度，以度为单位。正值表示设备向右上方倾斜，负值表示向左上方倾斜，0表示设备处于水平状态。
      var gamma = event.gamma; // 设备在其自身的轴上的旋转，以度为单位。正值表示设备逆时针旋转，负值表示顺时针旋转，0表示设备未旋转。

      document.getElementById('orientationOutput').innerHTML = "方向: " + alpha +
              " 倾斜度: " + beta +
              " 旋转度: " + gamma;
    }, false);
  } else {
    document.getElementById('orientationOutput').innerHTML = "此浏览器不支持Device Orientation API.";
  }

</script>
</body>
</html>